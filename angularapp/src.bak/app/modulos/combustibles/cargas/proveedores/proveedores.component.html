<div class="card">
	<div class="card-header bg-secondary">
		<div class="card-header__title text-white">
			Carga de consumo de proveedores
		</div>
	</div>


	<div class="card-body">
		<div class="container">
			<form [formGroup]="fuelConsumptionForm">
				<div class="row">

					<div class="col-12" *ngIf="this.responseMessage !== ''">
						<div class="alert-response p-3">
							<div class="col-1 d-flex justify-content-center"><img src="../../../../../assets/icons/ic_alert_danger.svg" alt=""></div>
							<div class=" col-10 error-feedback">
								{{this.responseMessage}}
							</div>	 
							<div class="col-1"><a (click)="closeAlert()" class="close-alert">X</a></div>
						</div>
					</div>

					<div class="col-12 col-lg-12 col-xl-4 mt-3">
						<label class="form-control-label" for="BusinessUnit">Unidad de negocio*:</label>

						<select class="form-control select-origami w-100" formControlName="BusinessUnit" placeholder="Selecciona tu unidad de negocio">
							<option selected disabled value="">Selecciona tu unidad de negocio</option>
							<option *ngFor="let BusinessUnit of businessUnitSelectValues" [value]="BusinessUnit.CbuName">{{ BusinessUnit.CbuName }}</option>
						</select>

						<!-- <div class="invalid-feedback" style="display: block;">Please select a valid state.</div> -->
					</div>

					<div class="col-12 col-lg-6 col-xl-4 mt-3">
						<label class="form-control-label" for="Period">Semana*:</label>
						<select class="form-control select-origami w-100" formControlName="Period" placeholder="Selecciona la semana de consumo">
							<option selected disabled value="">Selecciona la semana de consumo</option>
							<option *ngFor="let Period of arrayNumeroDeSemana" [value]="'SEM ' + Period.value">Semana {{ Period.viewValue }}</option>
						</select>
					</div>

					<div class="col-12 col-lg-6 col-xl-4 mt-3">
						<label class="form-control-label" for="Supplier">Proveedor*:</label>
						<select class="form-control select-origami w-100" formControlName="Supplier">
							<option selected disabled value="">Selecciona tu proveedor</option>
							<option *ngFor="let Supplier of supplierSelectValues" [value]="Supplier.SupplierName">{{ Supplier.SupplierName }}</option>
						</select>
					</div>

				</div>
			</form>




			<div class="row">
				<div class="col-12 mt-3">
					<p>
						Información de proveedor* (carga tu plantilla de excel actualizada):
					</p>
				</div>

				<div class="col-12">
					<div class="form-group">
						<form [formGroup]="fuelConsumptionForm">
							<input class="form-control file-input w-100" type="file" name="file" #fileUpload formControlName="File">
						</form>
					</div>
				</div>


				<div *ngIf="myPreloader">
					<div class="row p-0 m-0">
						<div class="col-12 pt-3 pb-3 text-center">
							<mat-progress-bar mode="indeterminate"></mat-progress-bar>
						</div>
					</div>
				</div>


				<div class="button-group">
					<button type="submit" class="btn btn-info" (click)="borrarFormulario()">Borrar</button>
					<button type="submit" class="btn btn-primary" (click)="enviarFormulario()" [disabled]="!fuelConsumptionForm.valid">Cargar</button>
				</div>
			</div>
		</div>
	</div>
</div>










<ng-template #alertMessage let-modal>
	<div class="text-end" style="cursor: pointer;">
		<a (click)="modal.dismiss('Cross click')">
			<img src="./../../../../assets/icons/ic_cerrar.svg" alt="">
		</a>
	</div>


	<div class="modal-body text-center origami-modal">
		<div class="mb-3">
			<ng-template>
				<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none">
					<circle cx="25" cy="25" r="25" fill="#62E700"/>
					<path fill-rule="evenodd" clip-rule="evenodd" d="M35.7868 17.5873C35.973 17.773 36.1207 17.9936 36.2215 18.2365C36.3222 18.4793 36.3741 18.7397 36.3741 19.0026C36.3741 19.2656 36.3222 19.526 36.2215 19.7688C36.1207 20.0117 35.973 20.2323 35.7868 20.418L23.7923 32.4124C23.6067 32.5986 23.3861 32.7463 23.1432 32.8471C22.9003 32.9479 22.64 32.9998 22.377 32.9998C22.1141 32.9998 21.8537 32.9479 21.6108 32.8471C21.368 32.7463 21.1474 32.5986 20.9617 32.4124L14.9644 26.4152C14.7786 26.2294 14.6311 26.0087 14.5305 25.7659C14.4299 25.523 14.3782 25.2627 14.3782 24.9999C14.3782 24.737 14.4299 24.4767 14.5305 24.2339C14.6311 23.991 14.7786 23.7704 14.9644 23.5845C15.1503 23.3987 15.3709 23.2512 15.6138 23.1506C15.8566 23.05 16.1169 22.9983 16.3798 22.9983C16.6426 22.9983 16.9029 23.05 17.1458 23.1506C17.3886 23.2512 17.6093 23.3987 17.7951 23.5845L22.377 28.1704L32.9561 17.5873C33.1418 17.4011 33.3624 17.2534 33.6053 17.1527C33.8481 17.0519 34.1085 17 34.3715 17C34.6344 17 34.8948 17.0519 35.1376 17.1527C35.3805 17.2534 35.6011 17.4011 35.7868 17.5873Z" fill="white"/>
				</svg>
			</ng-template>


			<!-- <ng-template [ngIf]="responseData.Success == true">
				<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none">
					<circle cx="25" cy="25" r="25" fill="#62E700"/>
					<path fill-rule="evenodd" clip-rule="evenodd" d="M35.7868 17.5873C35.973 17.773 36.1207 17.9936 36.2215 18.2365C36.3222 18.4793 36.3741 18.7397 36.3741 19.0026C36.3741 19.2656 36.3222 19.526 36.2215 19.7688C36.1207 20.0117 35.973 20.2323 35.7868 20.418L23.7923 32.4124C23.6067 32.5986 23.3861 32.7463 23.1432 32.8471C22.9003 32.9479 22.64 32.9998 22.377 32.9998C22.1141 32.9998 21.8537 32.9479 21.6108 32.8471C21.368 32.7463 21.1474 32.5986 20.9617 32.4124L14.9644 26.4152C14.7786 26.2294 14.6311 26.0087 14.5305 25.7659C14.4299 25.523 14.3782 25.2627 14.3782 24.9999C14.3782 24.737 14.4299 24.4767 14.5305 24.2339C14.6311 23.991 14.7786 23.7704 14.9644 23.5845C15.1503 23.3987 15.3709 23.2512 15.6138 23.1506C15.8566 23.05 16.1169 22.9983 16.3798 22.9983C16.6426 22.9983 16.9029 23.05 17.1458 23.1506C17.3886 23.2512 17.6093 23.3987 17.7951 23.5845L22.377 28.1704L32.9561 17.5873C33.1418 17.4011 33.3624 17.2534 33.6053 17.1527C33.8481 17.0519 34.1085 17 34.3715 17C34.6344 17 34.8948 17.0519 35.1376 17.1527C35.3805 17.2534 35.6011 17.4011 35.7868 17.5873Z" fill="white"/>
				</svg>
			</ng-template>

			<ng-template [ngIf]="responseData.Success == false">
				<svg xmlns="http://www.w3.org/2000/svg" width="51" height="50" viewBox="0 0 51 50" fill="none">
					<ellipse cx="25.019" cy="25" rx="25.019" ry="25" fill="#FF252B"/>
					<path d="M33.0845 16.94C32.9452 16.8006 32.7798 16.69 32.5978 16.6145C32.4155 16.5389 32.2201 16.5 32.0228 16.5C31.8254 16.5 31.63 16.5389 31.4478 16.6145C31.2657 16.69 31.1002 16.8006 30.9609 16.94L33.0845 16.94ZM33.0845 16.94C33.2241 17.0792 33.3349 17.2446 33.4105 17.4266C33.4862 17.6089 33.5251 17.8043 33.5251 18.0016C33.5251 18.1989 33.4862 18.3943 33.4105 18.5765C33.3348 18.7588 33.2239 18.9243 33.0841 19.0636L19.0766 33.0605C18.7949 33.3419 18.413 33.5 18.0148 33.5C17.6166 33.5 17.2346 33.3419 16.953 33.0605C16.6713 32.779 16.5129 32.3972 16.5129 31.9989C16.5129 31.6007 16.6713 31.2189 16.953 30.9374L30.9605 16.9405L33.0841 16.9396L32.7312 17.2937L33.085 16.9405C33.0849 16.9403 33.0847 16.9401 33.0845 16.94Z" fill="white" stroke="white"/>
					<path d="M16.9539 16.9396C16.8142 17.0789 16.7033 17.2444 16.6276 17.4266C16.5519 17.6089 16.5129 17.8043 16.5129 18.0016C16.5129 18.1989 16.5519 18.3943 16.6276 18.5765C16.7032 18.7587 16.814 18.9241 16.9537 19.0633C16.9537 19.0634 16.9538 19.0635 16.9539 19.0636L30.9615 33.0605C31.2431 33.3419 31.6251 33.5 32.0233 33.5C32.4215 33.5 32.8034 33.3419 33.0851 33.0605C33.3668 32.779 33.5251 32.3972 33.5251 31.9989C33.5251 31.6007 33.3668 31.2189 33.0851 30.9374L19.0776 16.9405C19.0775 16.9404 19.0774 16.9404 19.0774 16.9403C18.938 16.8007 18.7725 16.69 18.5903 16.6145C18.408 16.5389 18.2126 16.5 18.0153 16.5C17.818 16.5 17.6226 16.5389 17.4403 16.6145C17.258 16.6901 17.0924 16.8008 16.953 16.9405L17.3069 17.2937L16.9539 16.9396Z" fill="white" stroke="white"/>
				</svg>
			</ng-template> -->
		</div>

		<p style="font-size: 18px; color: #112876;">
			<p>{{ responseMessage }}</p>

			<p>¿Confirma sobre escribir la información?</p>
			<!-- <ng-template [ngIf]="responseData.Success == false">
				{{ responseData.Message }}
			</ng-template>

			<ng-template [ngIf]="responseData.Success == true">
				Tu formulario se ha envíado con éxito
			</ng-template> -->

		<a class="btn btn-primary" (click)="confirmarReenvio()">
			Confirmar.
		</a>
	</div>
</ng-template>




<ng-template #successAlert let-modal>
	<div class="text-end" style="cursor: pointer;">
		<a (click)="modal.dismiss('Cross click')">
			<img src="./../../../../assets/icons/ic_cerrar.svg" alt="">
		</a>
	</div>


	<div class="modal-body text-center origami-modal">
		<p style="font-size: 18px; color: #112876;">
			Su archivo se ha cargado con éxito
		</p>
		<a class="btn btn-primary" (click)="successConfirm()">
			Aceptar
		</a>
	</div>
</ng-template>




<ng-template #missingModal let-modal>
	<div class="text-end" style="cursor: pointer;">
		<a (click)="modal.dismiss('Cross click')">
			<img src="./../../../../assets/icons/ic_cerrar.svg" alt="">
		</a>
	</div>


	<div class="modal-body text-center origami-modal">
		<p style="font-size: 18px; color: #112876;">
			Le faltan los campos:
		</p>

		<!-- {{ MissingDataList[0].RecordsList | json }} -->

		<div *ngFor="let item of MissingDataList[0].RecordsList" style="font-size: 9px; text-align: left;">
			{{ item }}<br>
		</div>


		<a class="btn btn-primary" (click)="successConfirm()">
			Aceptar
		</a>
	</div>
</ng-template>
