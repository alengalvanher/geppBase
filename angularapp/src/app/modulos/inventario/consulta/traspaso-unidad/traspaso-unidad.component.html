<form *ngIf="Step === 1" [formGroup]="formTransfer">
    <div class="traspaso-wrapper">
        <div class="bloque-azul d-flex align-items-center" style="background: #112876; border-radius: 10px; padding: 10px 20px; height: 70px;">
            <div class="flex-grow-1" style="font-size: 18px; color: #FFF; font-weight: bold; text-align: left;">
                {{this.dataHeader[0]}} | 
                {{this.dataHeader[1]}} | 
                {{this.dataHeader[2]}} - 
                {{this.dataHeader[3]}} | 
                {{this.dataHeader[4]}} 
            </div>
    
        </div>
    
        <div class="row">
            <div class="col-12">
                <h3 class="text-align-center" style="font-size: 20px; color: #112876; display: block; text-align: center; margin-top: 30px;">Traspaso de unidad</h3>
            </div>
        </div>
    
        <div class="row">
            <div class="col-12 mt-3 mb-3">
                <label class="form-control-label text-secondary mb-1 mt-1" for="TransferDate">Fecha de traspaso*:</label>
                <div class="input-group col-12 ps-0 mb-1" style="padding-right: 0px">
                    <div class="input-group-text" (click)="d2.toggle()">
                        <svg width="17" height="20" viewBox="0 0 17 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 2.49967H14.1667V0.833008H12.5V2.49967H4.16667V0.833008H2.5V2.49967H1.66667C0.75 2.49967 0 3.24967 0 4.16634V17.4997C0 18.4163 0.75 19.1663 1.66667 19.1663H15C15.9167 19.1663 16.6667 18.4163 16.6667 17.4997V4.16634C16.6667 3.24967 15.9167 2.49967 15 2.49967ZM15 17.4997H1.66667V6.66634H15V17.4997Z" fill="#707EAD"/>
                        </svg>
                    </div>
    
                    <input (click)="d2.toggle()" class="form-control" placeholder="DD/MM/AAAA"
                      formControlName="TransferDate" id="TransferDate"
                       ngbDatepicker #d2="ngbDatepicker" style="z-index: 999999999999!important">
    
                </div>
            </div>

            <div class="col-12 col-md-6 mt-3 mb-3">
                <div class="form-group">
                    <label class="form-control-label text-secondary mb-1 mt-1" for="Region">Región*:</label>
                    <select class="form-select form-control select-origami w-100" formControlName="Region" id="Region" (change)="onChangeRegion($event)">
                        <option selected disabled value="">Selecciona una región</option>
                        <ng-container *ngFor="let Region of RegionList">
                            <option *ngIf="Region.Status" [value]="Region.Identifier">{{ Region.RegionName }}</option>
                        </ng-container>
                    </select>
                </div>
            </div>
    
            <div class="col-12 col-md-6 mt-3 mb-3">
                <div class="form-group">
                    <label class="form-control-label text-secondary mb-1 mt-1" for="Site">Sitio*:</label>
                    <select class="form-select form-control select-origami w-100" formControlName="Site" id="Site" (change)="onChange($event)" >
                        <option selected disabled value="">Selecciona un Sitio</option>
                        <ng-container *ngFor="let Site of SiteList">
                            <option *ngIf="Site.Status" [value]="Site.Identifier">{{ Site.CedisName }}</option>
                        </ng-container>
                    </select>
                </div>
            </div>
    
    
            <div class="col-12 mt-3 mb-3">
                <div class="form-group">
                    <label class="form-control-label text-secondary mb-1 mt-1" for="Reason">Motivo:</label>
                    <input class="form-control w-100" id="Reason" name="Reason" formControlName="Reason"
                        placeholder="Describe brevemente el motivo" type="text">
                </div>
            </div>
    
        </div>
    
        <div class="mb-4 mt-3 d-flex justify-content-center">
            <button style="margin-right: 20px;" type="button" class="btn btn-info pd-x-25 mr-3" (click)="cancel(false)">
                Cancelar
            </button>
    
            <button type="button" class="btn btn-primary pd-x-25 mr-0" [disabled]="!(formTransfer.valid && (formTransfer.touched ||  formTransfer.dirty))" (click)="sendTransfer()">
                Traspasar
            </button>
        </div>
        
    </div>
</form>

<div *ngIf="Step == 2" class="step-two p-5 m-5">
    <div class="row ">
        <div class="col-12 p-3 text-center">
            <p style="font-size: 16px; color: #112876;">
                Estás traspasando la unidad {{this.dataHeader[0]}} al sitio {{this.Sitetext}}<br>
                ¿Estás seguro que deseas continuar?
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col-12 d-flex justify-content-center">
            <button class="btn btn-info" style="margin-right: 20px;" (click)="back2stepOne()">
                Atrás
            </button>

            <button class="btn btn-primary" (click)="sendTransfer2server()">
                Continuar
            </button>
        </div>
    </div>
</div>
<div *ngIf="Step == 3" class="step-three">
    <div class="row">
        <div class="col-12 mt-3 mb-4 d-flex justify-content-center align-items-center flex-column">
            <div class="m-4">
                <img src="./../../../../assets/icons/ic_good.png" alt="">
            </div>
            <h6 class="text-secondary">
               <strong>Se ha traspasado la unidad {{this.dataHeader[0]}} con éxito.</strong>
            </h6>
            <div class="w-100 ms-3 mt-3">
                <p class="mb-1"><strong>Región:</strong> {{this.RegionText}} </p>
                <p class="mb-1"><strong>Sitio:</strong> {{this.Sitetext}} </p>
                <p class="mb-1"><strong>Fecha:</strong> {{this.formTransfer.value.TransferDate}} </p>
                <p class="mb-1"><strong>Motivo:</strong> {{this.formTransfer.value.Reason}} </p>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 mt-3 mb-4 d-flex justify-content-center">
            <button style="margin-right: 20px;" type="button" class="btn btn-primary" (click)="clickBack.emit('traspaso')">
                Continuar
            </button>
        </div>
    </div>
</div>
<div *ngIf="Step == 4" class="step-four">
    <div class="row">
        <div class="col-12 mt-3 mb-4 d-flex justify-content-center align-items-center flex-column">
            <div class="m-4">
                <img src="./../../../../assets/icons/ic_wrong.png" alt="">
            </div>
            <h6 class="text-secondary">
               <strong>Hubo un problema al realizar el traspaso. <br>favor de intentarlo más tarde.</strong>
            </h6>
        </div>
    </div>

    <div class="row">
        <div class="col-12 mt-3 mb-4 d-flex justify-content-center">
            <button style="margin-right: 20px;" type="button" class="btn btn-primary" (click)="clickBack.emit('traspaso')">
                Continuar
            </button>
        </div>
    </div>
</div>
